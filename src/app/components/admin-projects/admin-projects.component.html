<!-- admin-projects.component.html -->
<div class="admin-container">
  <div class="admin-header">
    <h1>Administration des Projets</h1>
    <div class="admin-actions">
      <a routerLink="/admin/projects/new" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> Nouveau Projet
      </a>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
    <p>Chargement des projets...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-state alert alert-danger">
    {{ error }}
    <button (click)="loadProjects()" class="btn btn-sm btn-outline-danger ms-3">
      Réessayer
    </button>
  </div>

  <!-- Projects Table -->
  <div *ngIf="!isLoading && !error" class="projects-table-container">
    <div *ngIf="projects.length === 0" class="no-projects">
      <p>Aucun projet n'a été créé.</p>
    </div>

    <table *ngIf="projects.length > 0" class="table table-hover">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Titre</th>
          <th scope="col">Technologies</th>
          <th scope="col">Images</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let project of projects">
          <td>{{ project.id }}</td>
          <td>{{ project.title }}</td>
          <td>
            <span class="badge bg-secondary me-1" *ngFor="let tech of project.technologies.split(',')">
              {{ tech.trim() }}
            </span>
          </td>
          <td>
            <span class="badge bg-info">{{ project.images.length }}</span>
          </td>
          <td>
            <div class="btn-group btn-group-sm">
              <a [routerLink]="['/admin/projects/edit', project.id]" 
                 class="btn btn-outline-primary">
                <i class="bi bi-pencil"></i>
              </a>
              <button (click)="confirmDelete(project.id!)" 
                      class="btn btn-outline-danger">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Confirmation Dialog -->
  <app-confirm-dialog
    *ngIf="showConfirmDialog"
    [title]="'Confirmer la suppression'"
    [message]="'Êtes-vous sûr de vouloir supprimer ce projet ? Cette action est irréversible.'"
    [confirmText]="'Supprimer'"
    [cancelText]="'Annuler'"
    (confirm)="onDeleteConfirmed()"
    (cancel)="onDeleteCancelled()"
  ></app-confirm-dialog>
</div>